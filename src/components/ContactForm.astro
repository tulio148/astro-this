---
interface Props {
  title?: string;
  subtitle?: string;
}

const { title, subtitle } = Astro.props;
---

<div
  class="bg-white p-8 sm:p-10 rounded-3xl shadow-lg border border-db-pink/10 transform opacity-0 mb-16"
>
  {title && <h2 class="text-2xl font-bold mb-3 text-db-pink">{title}</h2>}
  {subtitle && <p class="mb-8 text-gray-700">{subtitle}</p>}

  <!-- Simple form with direct POST to FormSubmit -->
  <form
    action="https://formsubmit.co/21dbfa7873979896e61cbcaa32d7a872"
    method="POST"
    class="space-y-6 contact-form transform"
  >
    <!-- Name field -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label for="name" class="block mb-2 font-medium text-gray-700"
          >Name</label
        >
        <input
          type="text"
          id="name"
          name="name"
          required
          class="w-full px-5 py-3 border-2 border-db-pink/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-db-pink focus:border-transparent transition-all duration-200"
        />
      </div>
      <div>
        <label for="email" class="block mb-2 font-medium text-gray-700"
          >Email</label
        >
        <input
          type="email"
          id="email"
          name="email"
          required
          class="w-full px-5 py-3 border-2 border-db-pink/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-db-pink focus:border-transparent transition-all duration-200"
        />
      </div>
    </div>

    <!-- Phone field -->
    <div>
      <label for="phone" class="block mb-2 font-medium text-gray-700"
        >Phone Number</label
      >
      <input
        type="tel"
        id="phone"
        name="phone"
        class="w-full px-5 py-3 border-2 border-db-pink/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-db-pink focus:border-transparent transition-all duration-200"
      />
    </div>

    <!-- Subject field -->
    <div>
      <label for="subject" class="block mb-2 font-medium text-gray-700"
        >Subject</label
      >
      <input
        type="text"
        id="subject"
        name="subject"
        required
        class="w-full px-5 py-3 border-2 border-db-pink/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-db-pink focus:border-transparent transition-all duration-200"
      />
    </div>

    <!-- Message field -->
    <div>
      <label for="message" class="block mb-2 font-medium text-gray-700"
        >Message</label
      >
      <textarea
        id="message"
        name="message"
        rows="5"
        required
        class="w-full px-5 py-3 border-2 border-db-pink/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-db-pink focus:border-transparent transition-all duration-200 resize-none"
      ></textarea>
    </div>

    <!-- FormSubmit specific fields -->
    <!-- Replace this with actual URL once verified -->
    <input
      type="hidden"
      name="_next"
      value="https://danceblocbrazil.com/thank-you"
    />
    <input type="hidden" name="_captcha" value="false" />
    <input type="hidden" name="_template" value="box" />
    <input type="text" name="_honey" style="display:none" />
    <input type="hidden" name="_autopilot" value="true" />

    <!-- Submit button -->
    <div>
      <button
        type="submit"
        class="w-full md:w-auto px-8 py-3 bg-gradient-to-r from-db-pink to-db-light-pink text-white font-medium rounded-xl shadow-md hover:shadow-lg transform hover:-translate-y-1 transition-all duration-300 cursor-pointer"
      >
        Send Message
      </button>
    </div>
  </form>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Animation for form appearance
    const contactForm = document.querySelector(
      ".contact-form"
    ) as HTMLFormElement | null;

    if (contactForm) {
      const outerContainer = contactForm.closest("div");

      if (outerContainer) {
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                outerContainer.classList.add(
                  "opacity-100",
                  "transition-all",
                  "duration-700",
                  "ease-out"
                );
                contactForm.classList.add(
                  "translate-y-0",
                  "transition-all",
                  "duration-700",
                  "ease-out"
                );
                observer.unobserve(outerContainer);
              }
            });
          },
          { threshold: 0.1 }
        );

        contactForm.classList.add("translate-y-8");
        observer.observe(outerContainer);
      }
    }
  });
</script>
