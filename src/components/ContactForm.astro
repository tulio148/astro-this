---
interface Props {
  title?: string;
  subtitle?: string;
}

const { title, subtitle } = Astro.props;
---

<div
  class="bg-white p-8 sm:p-10 rounded-3xl shadow-lg border border-db-pink/10 transform opacity-0 contact-form mb-16"
>
  {title && <h2 class="text-2xl font-bold mb-3 text-db-pink">{title}</h2>}
  {subtitle && <p class="mb-8 text-gray-700">{subtitle}</p>}

  <form
    action="https://formsubmit.co/info@danceblocbrazil.com"
    method="POST"
    class="space-y-6"
  >
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label for="name" class="block mb-2 font-medium text-gray-700"
          >Name</label
        >
        <input
          type="text"
          id="name"
          name="name"
          required
          class="w-full px-5 py-3 border-2 border-db-pink/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-db-pink focus:border-transparent transition-all duration-200"
        />
      </div>
      <div>
        <label for="email" class="block mb-2 font-medium text-gray-700"
          >Email</label
        >
        <input
          type="email"
          id="email"
          name="email"
          required
          class="w-full px-5 py-3 border-2 border-db-pink/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-db-pink focus:border-transparent transition-all duration-200"
        />
      </div>
    </div>

    <div>
      <label for="phone" class="block mb-2 font-medium text-gray-700"
        >Phone Number</label
      >
      <input
        type="tel"
        id="phone"
        name="phone"
        class="w-full px-5 py-3 border-2 border-db-pink/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-db-pink focus:border-transparent transition-all duration-200"
      />
    </div>

    <div>
      <label for="message" class="block mb-2 font-medium text-gray-700"
        >Message</label
      >
      <textarea
        id="message"
        name="message"
        rows="5"
        required
        class="w-full px-5 py-3 border-2 border-db-pink/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-db-pink focus:border-transparent transition-all duration-200 resize-none"
      ></textarea>
    </div>

    <!-- FormSubmit specific fields -->
    <input
      type="hidden"
      name="_next"
      value="https://danceblocbrazil.com/thank-you"
    />
    <input type="hidden" name="_captcha" value="false" />
    <input type="hidden" name="_template" value="box" />

    <div>
      <button
        type="submit"
        class="w-full md:w-auto px-8 py-3 bg-gradient-to-r from-db-pink to-db-light-pink text-white font-medium rounded-xl shadow-md hover:shadow-lg transform hover:-translate-y-1 transition-all duration-300"
      >
        Send Message
      </button>
    </div>
  </form>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.querySelector(".contact-form");

    if (form) {
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add(
                "opacity-100",
                "translate-y-0",
                "transition-all",
                "duration-700",
                "ease-out"
              );
              observer.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.1 }
      );

      form.classList.add("translate-y-8");
      observer.observe(form);
    }
  });
</script>
